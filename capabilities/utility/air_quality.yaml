fulcrum: "1.0"
name: air_quality
description: Get real-time air quality data from OpenAQ - the world's largest open air quality platform. Free, no API key required.

schema:
  input:
    type: object
    properties:
      city:
        type: string
        description: City name (e.g., "Amsterdam", "Helsinki")
        examples:
          - Amsterdam
          - Helsinki
          - London
      country:
        type: string
        description: ISO 3166-1 alpha-2 country code (e.g., "NL", "FI", "GB")
        examples:
          - NL
          - FI
          - US
      coordinates:
        type: object
        description: Search by coordinates (alternative to city)
        properties:
          latitude:
            type: number
          longitude:
            type: number
          radius:
            type: integer
            description: Search radius in meters (default 10000)
      parameter:
        type: string
        description: Specific pollutant to filter by
        enum: [pm25, pm10, o3, no2, so2, co]
      limit:
        type: integer
        description: Number of results (default 10, max 100)
        default: 10
    required: []
  output:
    type: object
    properties:
      results:
        type: array
        items:
          type: object
          properties:
            location:
              type: string
            city:
              type: string
            country:
              type: string
            coordinates:
              type: object
              properties:
                latitude:
                  type: number
                longitude:
                  type: number
            measurements:
              type: array
              items:
                type: object
                properties:
                  parameter:
                    type: string
                    description: Pollutant type (pm25, pm10, o3, no2, so2, co)
                  value:
                    type: number
                  unit:
                    type: string
                  lastUpdated:
                    type: string

providers:
  primary:
    service: openaq
    cost_per_call: 0.0
    timeout: 15
    config:
      endpoint: https://api.openaq.org/v2/latest
      method: GET
      param_map:
        city: city
        country: country
        parameter: parameter
        limit: limit

cache:
  strategy: exact
  ttl: 600  # 10 min - air quality changes slowly

auth:
  required: false

metadata:
  category: utility
  tags: [air-quality, pollution, environment, health, openaq]
  cost_category: free
  execution_time: fast
  read_only: true
