fulcrum: "1.0"
name: brave_research
description: Multi-hop research with AI planning, reasoning, and comprehensive web analysis

schema:
  input:
    type: object
    properties:
      messages:
        type: array
        description: Chat messages in OpenAI format
        items:
          type: object
          properties:
            role:
              type: string
              enum: [system, user, assistant]
            content:
              type: string
        minItems: 1
      model:
        type: string
        description: Model identifier (use "brave")
        default: brave
      stream:
        type: boolean
        description: Stream response as messages
        default: true
      enable_research:
        type: boolean
        description: Enable multi-search research mode (REQUIRED for this capability)
        default: true
    required: [messages]
  output:
    type: object
    properties:
      id:
        type: string
      object:
        type: string
        enum: [chat.completion]
      choices:
        type: array
        items:
          type: object
          properties:
            index:
              type: integer
            message:
              type: object
              properties:
                role:
                  type: string
                content:
                  type: string
                  description: Stringified message with research findings
            finish_reason:
              type: string
      usage:
        type: object
        properties:
          num_searches:
            type: integer
            description: Number of web searches performed (can be 50+)
          pages_analyzed:
            type: integer
            description: Number of pages analyzed
          input_tokens:
            type: integer
          output_tokens:
            type: integer
          cost:
            type: number
            description: Total cost for this research session

providers:
  primary:
    service: brave
    cost_per_call: 0.01
    timeout: 300
    config:
      endpoint: https://api.search.brave.com/res/v1/chat/completions
      method: POST
      content_type: application/json

cache:
  strategy: semantic
  ttl: 3600
  similarity_threshold: 0.92

auth:
  required: true
  type: api_key
  key: BRAVE_GROUNDING_API_KEY
  header: X-Subscription-Token

metadata:
  category: search
  tags: [search, ai, research, multi-hop, brave, deep-analysis]
  cost_category: moderate
  execution_time: slow
  read_only: true
  notes: |
    Research Mode Characteristics:
    - Model iteratively refines search strategy
    - Sequential searches with planning and reasoning
    - P99: up to 53 queries, 1000 pages analyzed, ~300 seconds
    - Median: single search sufficient for most questions

    Pricing:
    - $4/1000 web searches + $5/million tokens
    - Typical research query: $0.01-0.10 depending on complexity
    - Cost metadata returned with each response

    Performance:
    - SOTA on SimpleQA with multi-search: highest accuracy tier
    - Best for complex, multi-faceted questions
    - Not suitable for real-time applications (use brave_grounding instead)

    Use Cases:
    - Comprehensive research on complex topics
    - Multi-faceted questions requiring multiple sources
    - Background tasks where latency is acceptable
    - High-accuracy requirements over speed

    Rate Limit: 2 requests/second (contact for higher limits)
