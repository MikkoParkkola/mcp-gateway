fulcrum: "1.0"
name: ipinfo_lookup
description: Get IP geolocation, ASN, company, carrier, and privacy detection from IPinfo - the most accurate IP data provider.

schema:
  input:
    type: object
    properties:
      ip:
        type: string
        description: IPv4 or IPv6 address to lookup
        examples:
          - "8.8.8.8"
          - "1.1.1.1"
    required:
      - ip
  output:
    type: object
    properties:
      ip:
        type: string
      hostname:
        type: string
      city:
        type: string
      region:
        type: string
      country:
        type: string
        description: Country code (ISO 3166-1 alpha-2)
      loc:
        type: string
        description: Latitude,Longitude coordinates
      org:
        type: string
        description: Organization/ASN owner
      postal:
        type: string
      timezone:
        type: string
      asn:
        type: object
        properties:
          asn:
            type: string
          name:
            type: string
          domain:
            type: string
          route:
            type: string
          type:
            type: string
      company:
        type: object
        properties:
          name:
            type: string
          domain:
            type: string
          type:
            type: string
      privacy:
        type: object
        properties:
          vpn:
            type: boolean
          proxy:
            type: boolean
          tor:
            type: boolean
          relay:
            type: boolean
          hosting:
            type: boolean

providers:
  primary:
    service: rest
    cost_per_call: 0
    timeout: 10
    config:
      base_url: https://ipinfo.io
      path: /{ip}
      method: GET
      headers:
        Authorization: "Bearer {env.IPINFO_TOKEN}"
        Accept: "application/json"

cache:
  strategy: exact
  ttl: 86400  # 24 hours - IP info changes slowly

auth:
  required: true
  type: api_key
  key: IPINFO_TOKEN
  description: Get token from https://ipinfo.io/account/token

metadata:
  category: security
  tags:
    - geolocation
    - ip-intelligence
    - asn
    - privacy-detection
    - ipinfo
  cost_category: free
  execution_time: fast
  read_only: true
  rate_limit: 50K req/month (free)
  docs: https://ipinfo.io/developers
