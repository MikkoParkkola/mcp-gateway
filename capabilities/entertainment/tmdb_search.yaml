fulcrum: "1.0"
name: tmdb_search
description: Search movies and TV shows from The Movie Database (TMDB). Free API key required.

schema:
  input:
    type: object
    properties:
      query:
        type: string
        description: Movie or TV show title to search
        examples:
          - "Inception"
          - "Breaking Bad"
          - "Interstellar"
      type:
        type: string
        description: Search type
        enum: [movie, tv, multi]
        default: multi
      year:
        type: integer
        description: Filter by release year
        examples:
          - 2024
          - 2010
      language:
        type: string
        description: ISO 639-1 language code for results
        default: en-US
      page:
        type: integer
        description: Page number (1-1000)
        default: 1
      include_adult:
        type: boolean
        description: Include adult content
        default: false
      region:
        type: string
        description: ISO 3166-1 region code for release date filtering
        examples:
          - US
          - GB
          - FI
    required: [query]
  output:
    type: object
    properties:
      page:
        type: integer
      total_results:
        type: integer
      total_pages:
        type: integer
      results:
        type: array
        items:
          type: object
          properties:
            id:
              type: integer
            title:
              type: string
              description: Movie title (or name for TV)
            name:
              type: string
              description: TV show name
            overview:
              type: string
            release_date:
              type: string
            first_air_date:
              type: string
            vote_average:
              type: number
            vote_count:
              type: integer
            poster_path:
              type: string
              description: Poster image path (prefix with https://image.tmdb.org/t/p/w500)
            media_type:
              type: string
              description: movie or tv (only in multi search)

providers:
  primary:
    service: tmdb
    cost_per_call: 0.0
    timeout: 10
    config:
      endpoint: https://api.themoviedb.org/3/search/{type}
      method: GET
      param_map:
        query: query
        year: year
        language: language
        page: page
        include_adult: include_adult
        region: region

cache:
  strategy: semantic
  ttl: 3600  # 1 hour

auth:
  required: true
  type: api_key
  key: TMDB_API_KEY
  param: api_key
  notes: Free API key from https://www.themoviedb.org/settings/api

metadata:
  category: entertainment
  tags: [movies, tv-shows, tmdb, search, entertainment]
  cost_category: free
  execution_time: fast
  read_only: true
  rate_limit:
    default: 40/10s
  notes: |
    Free API key available at https://www.themoviedb.org/settings/api
    Poster images: prefix poster_path with https://image.tmdb.org/t/p/w500
