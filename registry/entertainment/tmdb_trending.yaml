fulcrum: "1.0"
name: tmdb_trending
description: Get trending movies and TV shows from The Movie Database (TMDB). Free API key required (easy to get).

schema:
  input:
    type: object
    properties:
      media_type:
        type: string
        description: Type of media to get trending
        enum: [movie, tv, all]
        default: all
      time_window:
        type: string
        description: Time window for trending
        enum: [day, week]
        default: week
      language:
        type: string
        description: ISO 639-1 language code for results
        default: en-US
      page:
        type: integer
        description: Page number
        default: 1
    required: []
  output:
    type: object
    properties:
      page:
        type: integer
      total_results:
        type: integer
      total_pages:
        type: integer
      results:
        type: array
        items:
          type: object
          properties:
            id:
              type: integer
            title:
              type: string
              description: Movie title
            name:
              type: string
              description: TV show name
            overview:
              type: string
            release_date:
              type: string
            first_air_date:
              type: string
            vote_average:
              type: number
            vote_count:
              type: integer
            popularity:
              type: number
            poster_path:
              type: string
            backdrop_path:
              type: string
            media_type:
              type: string
              description: movie or tv

providers:
  primary:
    service: rest
    cost_per_call: 0
    timeout: 10
    config:
      base_url: https://api.themoviedb.org
      path: /3/trending/{media_type}/{time_window}
      method: GET
      headers:
        Accept: "application/json"
      params:
        language: "{language}"
        page: "{page}"
        api_key: "{env.TMDB_API_KEY}"

cache:
  strategy: exact
  ttl: 1800

auth:
  required: true
  type: api_key
  key: TMDB_API_KEY
  param: api_key
  notes: Free API key from https://www.themoviedb.org/settings/api

metadata:
  category: entertainment
  tags:
    - movies
    - tv-shows
    - tmdb
    - trending
    - popular
    - entertainment
  cost_category: free
  execution_time: fast
  read_only: true
  rate_limit:
    default: 40/10s
